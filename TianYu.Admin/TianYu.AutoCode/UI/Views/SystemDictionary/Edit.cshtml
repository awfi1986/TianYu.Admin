// <autogenerated>
//   This file was generated by T4 code generator Template.tt.
//   Any changes made to this file manually will be lost next time the file is regenerated.
// </autogenerated>

 
@using TianYu.Admin.Domain.ViewModel.Response
@model QueryDetailSystemDictionaryResponseModel
@{
    Layout = "~/Views/Shared/_Info.cshtml";
}

<div class="weadmin-body">
    <form class="layui-form">
        @*隐藏字段*@
        <input type="hidden" name="Id" value="@Model.Id" />
         
		        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>父级ID（第一级为0）
            </label>
            <div class='layui-input-block'>
                <input type='text' name='ParentId' lay-verify='required' class='layui-input' placeholder='父级ID（第一级为0）' value='@Model.ParentId' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>字典编码
            </label>
            <div class='layui-input-block'>
                <input type='text' name='Code' lay-verify='required' class='layui-input' placeholder='字典编码' value='@Model.Code' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>字典名称
            </label>
            <div class='layui-input-block'>
                <input type='text' name='Name' lay-verify='required' class='layui-input' placeholder='字典名称' value='@Model.Name' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>字典描述
            </label>
            <div class='layui-input-block'>
                <input type='text' name='Remark' lay-verify='required' class='layui-input' placeholder='字典描述' value='@Model.Remark' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>字典值
            </label>
            <div class='layui-input-block'>
                <input type='text' name='Value' lay-verify='required' class='layui-input' placeholder='字典值' value='@Model.Value' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>排序
            </label>
            <div class='layui-input-block'>
                <input type='text' name='Sort' lay-verify='required' class='layui-input' placeholder='排序' value='@Model.Sort' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>创建时间
            </label>
            <div class='layui-input-block'>
                <input type='text' name='CreateTime' lay-verify='required' class='layui-input' placeholder='创建时间' value='@Model.CreateTime' />
            </div>
        </div>
        <div class='layui-form-item'>
            <label class='layui-form-label'>
                <span class='we-red'>*</span>修改时间
            </label>
            <div class='layui-input-block'>
                <input type='text' name='ModifyTime' lay-verify='required' class='layui-input' placeholder='修改时间' value='@Model.ModifyTime' />
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">
            </label>
            <div class="layui-input-block">
                <button class="layui-btn" lay-filter="Save" lay-submit="">保存</button>
            </div>
        </div>

    </form>
</div>
@section scripts{
    <script>

        layui.use(['jquery', 'form'], function () {
            var form = layui.form,
                $ = layui.jquery;

            //提交表单数据
            form.on('submit(Save)', function (data) {
                //禁用提交按钮
                toggleSubmitStatus(data.elem);

                var param = data.field; 
                 
                $.ajax({
                    type: 'post',
                     url: '@Url.Action("Update")',
                    data: param,
                    dataType: 'json',
                    success: function (res) {

                        if (res.Status == 200) {
                            res = res.Data;
                            if (res.Status == 1) {
                                //刷新列表
                                $(".layui-btn[lay-filter='formSearch']", window.parent.document).click();
                                layer.msg('保存成功', {time:500},function () {
                                    //关闭当前弹出层
                                    var index = parent.layer.getFrameIndex(window.name);
                                    parent.layer.close(index);
                                }); 
                            }
                            else {
                                //启用提交按钮
                                toggleSubmitStatus(data.elem, true);
                                layer.msg(res.ErrorMessage);
                            }
                        }
                        else {
                            //启用提交按钮
                            toggleSubmitStatus(data.elem, true);
                            layer.msg('请求错误：' + res.ErrorMessage + '，' + res.Status);
                        }
                    }
                });
                return false;
            });

        });
    </script>
}
